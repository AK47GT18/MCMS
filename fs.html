<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Field Supervisor | Mkaka CMS</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Modular CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components/buttons.css">
    <link rel="stylesheet" href="css/components/cards.css">
    <link rel="stylesheet" href="css/components/tables.css">
    <link rel="stylesheet" href="css/components/drawer.css">
    <link rel="stylesheet" href="css/components/notifications.css">
    <link rel="stylesheet" href="css/components/toast.css">
    <link rel="stylesheet" href="css/pages/field.css">
</head>

<body>

    <div class="app">
        <header class="top-bar">
            <div class="logo">
                <i class="fas fa-hard-hat" style="color: var(--orange);"></i>
                <span>MKAKA FIELD</span>
            </div>
            <div class="header-tools">
                <div class="gps-badge">
                    <i class="fas fa-satellite-dish"></i> GPS LOCKED
                </div>
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search...">
                </div>

                <!-- Notification Wrapper -->
                <div class="notification-wrapper">
                    <div class="icon-btn" onclick="toggleNotifications()" style="cursor: pointer; position: relative;">
                        <i class="fas fa-bell" style="color: var(--slate-500); font-size: 18px;"></i>
                        <div class="notification-badge" id="notify-badge">1</div>
                    </div>
                    
                    <div class="notification-dropdown" id="notification-dropdown">
                        <div class="notify-header">
                            <h3>Notifications</h3>
                            <span class="notify-action">Clear All</span>
                        </div>
                        <div class="notify-list" id="notify-list">
                             <!-- Demo Items -->
                             <div class="notify-item info">
                                <div class="notify-icon"><i class="fas fa-info"></i></div>
                                <div class="notify-content">
                                    <div class="notify-title">Shift Started</div>
                                    <div class="notify-msg">You clocked within the geo-fence at 07:30 AM.</div>
                                    <div class="notify-time">8:30 AM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="user-profile" onclick="openProfileDrawer()" style="cursor: pointer;">
                    <div class="profile-avatar" style="background: var(--blue);">FS</div>
                </div>
            </div>
        </header>

        <div class="workspace">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="user-profile">
                        <div class="profile-avatar" style="background: var(--blue);">FS</div>
                        <div class="profile-info">
                            <div class="profile-name">John Banda</div>
                            <div class="profile-role">Field Supervisor</div>
                        </div>
                    </div>
                </div>
                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <div class="nav-label">Main</div>
                        <a class="nav-link active" id="sidebar-home" onclick="navigateTo('home')"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a>
                        <a class="nav-link" id="sidebar-tasks" onclick="navigateTo('tasks', this)"><i class="fas fa-list-check"></i> <span>Tasks</span></a>
                        <a class="nav-link" onclick="openDrawer('report')"><i class="fas fa-camera"></i> <span>Daily Reports</span></a>
                        <a class="nav-link" id="sidebar-assets" onclick="navigateTo('assets', this)"><i class="fas fa-truck-moving"></i> <span>Equipment</span></a>
                    </div>
                </nav>
            </aside>

            <main class="main-content">
                <div class="page-header">
                    <div style="display: flex; justify-content: space-between; align-items: start; flex:1;">
                        <div style="width:100%;">
                            <h1 class="page-title">CEN-01 Unilia Library</h1>
                            <div class="context-strip">
                                <span>Sat, Jan 03</span>
                                <span style="color: var(--slate-400);">•</span>
                                <span><i class="fas fa-cloud-sun"></i> 28°C Sunny</span>
                                <span style="color: var(--slate-400);">•</span>
                                <span style="color: var(--emerald); font-weight: 600;">14 Workers Present</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content">

                    <div id="view-home" class="view-section active" style="animation: fadeIn 0.3s ease;">
                        <div class="stats-grid">
                            <div class="stat-card" style="border-left: 4px solid var(--orange); cursor: pointer;"
                                onclick="openDrawer('report')">
                                <div class="stat-header"><span class="stat-label" style="color: var(--orange);">Daily
                                        Log</span><i class="fas fa-plus-circle" style="color: var(--orange);"></i></div>
                                <div class="stat-value" style="font-size: 18px; color: var(--orange);">Submit Report
                                </div>
                                <div class="stat-sub">Geotagging Active</div>
                            </div>
                            <div class="stat-card" onclick="openDrawer('attendance')">
                                <div class="stat-header"><span class="stat-label">Workforce</span><i
                                        class="fas fa-users" style="color: var(--blue);"></i></div>
                                <div class="stat-value">14</div>
                                <div class="stat-sub">12 Gen / 2 Skilled</div>
                            </div>
                            <div class="stat-card" onclick="openDrawer('material')">
                                <div class="stat-header"><span class="stat-label">Materials</span><i
                                        class="fas fa-cubes" style="color: var(--emerald);"></i></div>
                                <div class="stat-value">15 Bags</div>
                                <div class="stat-sub">Cement Delivered</div>
                            </div>
                            <div class="stat-card" onclick="openDrawer('incident')">
                                <div class="stat-header"><span class="stat-label">Incidents</span><i
                                        class="fas fa-triangle-exclamation" style="color: var(--slate-400);"></i></div>
                                <div class="stat-value">0</div>
                                <div class="stat-sub">Safe Day</div>
                            </div>
                        </div>

                        <div class="data-card">
                            <div class="data-card-header">
                                <div class="card-title">Today's Activity Log</div>
                            </div>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Type</th>
                                        <th>Detail</th>
                                        <th>GPS</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="color: var(--slate-500);">14:30</td>
                                        <td><strong>Material</strong></td>
                                        <td>Cement Received (15 Bags)</td>
                                        <td style="font-family:'JetBrains Mono'; font-size:11px;">-13.98, 33.78</td>
                                        <td><span class="status active"><i class="fas fa-check"></i> Verified</span></td>
                                    </tr>
                                    <tr>
                                        <td style="color: var(--slate-500);">10:15</td>
                                        <td><strong>Inspection</strong></td>
                                        <td>Foundation Trench Checked</td>
                                        <td style="font-family:'JetBrains Mono'; font-size:11px;">-13.98, 33.78</td>
                                        <td><span class="status active"><i class="fas fa-check"></i> Valid</span></td>
                                    </tr>
                                    <tr>
                                        <td style="color: var(--slate-500);">07:30</td>
                                        <td><strong>Attendance</strong></td>
                                        <td>Morning Roll Call (14 pax)</td>
                                        <td style="font-family:'JetBrains Mono'; font-size:11px;">-13.98, 33.78</td>
                                        <td><span class="status active"><i class="fas fa-check"></i> Valid</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="view-tasks" class="view-section">
                        <div class="data-card">
                            <div class="data-card-header"><div class="card-title">Assigned Tasks</div></div>
                            <!-- Mock Content -->
                            <div style="padding: 16px;">
                                <div style="border-bottom: 1px solid var(--slate-100); padding-bottom: 12px; margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">Excavate Trench A4</div>
                                    <div style="font-size: 12px; color: var(--slate-500);">Due: Today | Assigned by A. Kanjira</div>
                                    <div style="margin-top: 8px;"><span class="status active">In Progress</span></div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">Receive Cement Delivery</div>
                                    <div style="font-size: 12px; color: var(--slate-500);">Due: 14:00 | Vendor: Malawi Cement</div>
                                    <div style="margin-top: 8px;"><span class="status completed">Completed</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div id="view-assets" class="view-section">
                        <div class="data-card">
                            <div class="data-card-header"><div class="card-title">On-Site Equipment</div></div>
                            <!-- Mock Content -->
                             <div style="padding: 16px;">
                                <div style="border-bottom: 1px solid var(--slate-100); padding-bottom: 12px; margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">CAT-320 Excavator</div>
                                    <div style="font-size: 12px; color: var(--emerald);">Operational</div>
                                    <div style="font-size: 11px; margin-top: 4px;">Hours: 4.5 hrs today</div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </main>
        </div>
        
        <!-- Bottom Nav for Mobile -->
        <nav class="bottom-nav">
            <a class="nav-item active" id="nav-home" onclick="navigateTo('home')">
                <i class="fas fa-home"></i> <span>Home</span>
            </a>
            <a class="nav-item" id="nav-tasks" onclick="navigateTo('tasks')">
                <i class="fas fa-tasks"></i> <span>Tasks</span>
            </a>
            <div class="nav-fab" onclick="openDrawer('report')">
                <i class="fas fa-plus"></i>
            </div>
            <a class="nav-item" id="nav-assets" onclick="navigateTo('assets')">
                <i class="fas fa-truck"></i> <span>Assets</span>
            </a>
            <a class="nav-item" onclick="openProfileDrawer()">
                <i class="fas fa-user"></i> <span>Profile</span>
            </a>
        </nav>
    </div>

    <!-- Main Drawer -->
    <div class="drawer-overlay" id="drawer-overlay">
        <div class="drawer" onclick="event.stopPropagation()">
            <div class="drawer-header">
                <div>
                    <div style="font-size: 11px; font-weight: 700; color: var(--slate-500); text-transform: uppercase;" id="d-sub">Data Entry</div>
                    <div style="font-size: 18px; font-weight: 800; color: var(--slate-900); margin-top: 4px;"
                        id="d-title">Title</div>
                </div>
                <div style="cursor: pointer; padding: 8px;" onclick="closeDrawer()">
                    <i class="fas fa-times" style="font-size: 18px; color: var(--slate-400);"></i>
                </div>
            </div>

            <div class="drawer-content" id="d-body">
            </div>

            <div class="drawer-footer" id="d-footer">
            </div>
        </div>
    </div>

    <!-- Profile Drawer -->
    <div class="drawer-overlay" id="profile-overlay">
        <div class="drawer">
            <div class="drawer-header">
                <h3>User Profile</h3>
                <button class="btn btn-secondary" onclick="closeProfileDrawer()"><i class="fas fa-times"></i></button>
            </div>
            <div class="drawer-content">
                <div style="padding: 24px; text-align: center; border-bottom: 1px solid var(--slate-200);">
                    <div style="width: 80px; height: 80px; background: var(--blue); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 700; margin: 0 auto 16px auto;">FS</div>
                    <h2 style="margin-bottom: 4px;">John Banda</h2>
                    <p style="color: var(--slate-500);">Field Supervisor</p>
                </div>
                <div style="padding: 24px;">
                     <div style="margin-top: 32px;">
                         <button class="btn btn-secondary" style="width: 100%; justify-content: center; color: var(--red); border-color: var(--slate-200);" onclick="location.href='login.html'"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/pages/field.js"></script>
</body>
</html>